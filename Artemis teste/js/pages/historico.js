document.addEventListener('DOMContentLoaded', ()=>{ protectPage(['ALUNO']); document.getElementById('userInfo').textContent = getSession().user?.nome||''; loadHistorico(); });
async function loadHistorico(){ try{ const list = await apiFetch('/historico'); document.getElementById('lista').innerHTML = '<table class="table"><thead><tr><th>Disciplina</th><th>Nota</th><th>FrequÃªncia</th></tr></thead><tbody>'+list.map(h=>`<tr><td>${escapeHtml(h.disciplina? h.disciplina.nome: h.disciplinaNome||'')}</td><td>${h.nota||''}</td><td>${h.frequencia||''}</td></tr>`).join('')+'</tbody></table>'; }catch(e){ toast('Erro'); } }